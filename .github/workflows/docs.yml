name: Publish Documentation

on:
    workflow_dispatch:
    push:
      branches:
        - main
      tags:
        - '[0-9]+.[0-9]+.[0-9]+'

permissions:
  contents: write

concurrency:
  group: ${{ github.ref }}
  cancel-in-progress: true

jobs:
  generate-and-publish-docs:
    uses: ./.github/workflows/swift-generate-and-publish-docs.yml
    with:
      os: macOS
      swift-version: '5.10'
      organisation: ${{ github.repository_owner }}
      repository: ${{ github.event.repository.name }}
      pages-branch: docs